var X=Object.defineProperty;var G=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var O=(r,t,s)=>t in r?X(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,H=(r,t)=>{for(var s in t||(t={}))Q.call(t,s)&&O(r,s,t[s]);if(G)for(var s of G(t))ee.call(t,s)&&O(r,s,t[s]);return r};import{j as d,B as R,a as e,u as te,T as m,r as f,S as D,C as U,b as _,c as j,F as $,L as W,d as re,e as ie,f as oe,I as ne,g as se,h as ae,G as le,i as de,V as w,k as ce,M as ue,l as q,H as K,m as he,n as fe,R as ge,o as F,p as be,q as pe,s as me}from"./vendor.5c055852.js";const Se=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const g of l.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&c(g)}).observe(document,{childList:!0,subtree:!0});function s(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(o){if(o.ep)return;o.ep=!0;const l=s(o);fetch(o.href,l)}};Se();var ve="/cs-react-interview-exercise/assets/header_logo.1094da8d.png";const B="80px",Le=({children:r})=>d(R,{className:"cs-header",position:"fixed",top:"0",right:"0",left:"0",width:"100vw",height:B,display:"flex",justifyContent:"center",children:[e("a",{href:"https://characterstrong.com",children:e("img",{className:"header-img",src:ve,alt:"CharacterStrong Logo"})}),r]});function Ee(r){const{districts:t}=r,s=te();return e(R,{width:"100%",borderWidth:1,borderRadius:"xl",overflow:"hidden",children:t.map(c=>e(R,{borderBottomWidth:1,p:4,_last:{borderBottomWidth:0},_hover:{backgroundColor:"blackAlpha.50",cursor:"pointer"},onClick:()=>s(`/districts/${c.LEAID}`),children:e(m,{children:c.NAME})}))})}function y(r,t={}){const{method:s="get",lazy:c=s!="get",debounce:o}=t,[l,g]=f.exports.useState(null),[h,u]=f.exports.useState(null),[n,i]=f.exports.useState(!c),a=f.exports.useRef(null),p=f.exports.useRef(new AbortController),v=f.exports.useCallback(async()=>{const L=async()=>{var E;g(null),i(!0),p.current.abort(),p.current=new AbortController;const b=await fetch(r,{signal:p.current.signal});i(!1),b.ok?((E=b.headers.get("Content-Type"))==null?void 0:E.includes("application/json"))?u(await b.json()):console.error("Unable to handle non-JSON response",b):g(b)};typeof o=="number"?(a.current!==null&&clearTimeout(a.current),a.current=window.setTimeout(L,o)):L()},[r,s]);return f.exports.useEffect(()=>{if(!c)return v(),()=>{a.current!==null&&clearTimeout(a.current)}},[v,c]),{loading:n,data:h,error:l,dispatch:v}}function xe(r){const t=`UPPER(NAME) LIKE UPPER('%${r}%')`;return`https://nces.ed.gov/opengis/rest/services/K12_School_Locations/EDGE_GEOCODE_PUBLICLEA_1516/MapServer/0/query?where=${encodeURIComponent(t)}&outFields=*&outSR=4326&f=json`}function V(r){const t=`LEAID = '${r}'`;return`https://nces.ed.gov/opengis/rest/services/School_District_Boundaries/EDGE_ADMINDATA_SCHOOLDISTRICTS_SY1920/MapServer/0/query?where=${encodeURIComponent(t)}&outFields=*&outSR=4326&f=json`}function Te(r,t,{searchPrivate:s=!1}){let c=`UPPER(NAME) LIKE UPPER('%${r}%')`;return t!=null&&(c+=` AND LEAID = '${t}'`),`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/${s?"Private_School_Locations_Current":"Public_School_Location_201819"}/FeatureServer/0/query?where=${encodeURIComponent(c)}&outFields=*&outSR=4326&f=json`}function Ce(r,t){const s=`LEAID = '${r}' AND NCESSCH = '${t}'`;return`https://nces.ed.gov/opengis/rest/services/K12_School_Locations/EDGE_ADMINDATA_PUBLICSCH_1920/MapServer/0/query?outFields=*&where=${encodeURIComponent(s)}&f=json`}function k(r){const{breadcrumb:t,loading:s,title:c,children:o}=r;return e(D,{initialScale:.9,in:!0,children:d(U,{width:"4xl",maxWidth:"100%",backgroundColor:"whiteAlpha.800",p:10,borderRadius:"xl",boxShadow:"xl",backdropFilter:"blur(20px) saturate(180%)",children:[s&&e(_,{children:e(j,{size:"xl"})}),e(D,{initialScale:.9,in:!s,children:!s&&d($,{children:[t&&d(m,{as:W,to:t.to,display:"flex",align:"center",children:[e(re,{fontSize:"1.5em",marginLeft:"-6px"}),t.content]}),e(m,{fontSize:"3xl",fontWeight:"bold",marginBottom:6,children:c}),o]})})]})})}const z=10;function Ie(){const[r,t]=f.exports.useState("Peninsula School District"),{loading:s,error:c,data:o}=y(xe(r),{debounce:300}),l=f.exports.useMemo(()=>o?o.features.map(h=>h.attributes).filter(Boolean):[],[o]),g=f.exports.useMemo(()=>l.slice(0,z),[l]);return d(k,{title:"Search districts",children:[d(ie,{marginBottom:4,children:[e(oe,{id:"DistrictName",children:"District name"}),e(ne,{size:"lg",value:r,onChange:h=>t(h.target.value),borderRadius:"xl"})]}),s?e(_,{height:"80px",children:e(j,{})}):d(D,{initialScale:.9,in:!s,children:[l.length>0?e(Ee,{districts:g}):e(_,{height:"80px",children:e(m,{children:"No results found."})}),l.length>z&&d(m,{marginTop:4,children:[(l.length-z).toLocaleString()," district(s) not shown. Please refine your search."]})]})]})}function we(){return e(D,{initialScale:.9,in:!0,children:e(Ie,{})})}function S(r){return d(se,{borderWidth:1,borderRadius:"xl",minWidth:"90px",p:4,align:"center",backgroundColor:"white",flexGrow:1,children:[e(m,{fontWeight:"medium",fontSize:22,children:r.value}),e(m,{textTransform:"uppercase",fontSize:10,fontWeight:"bold",children:r.label}),r.afterValue]})}const ye="AIzaSyB4xIAr7G7f9emydvsTtXsGG5KLjPW6im4";function Y(r){var h,u;const{district:t,schools:s}=r,[c,o]=f.exports.useState(null),{isLoaded:l}=ae({id:"google-map-script",googleMapsApiKey:ye}),g=f.exports.useMemo(()=>s.reduce((n,i)=>{var a,p,v,L,b,E,x,T;return(i==null?void 0:i.attributes)&&("LAT"in i.attributes?n.push({lat:i.attributes.LAT||0,long:i.attributes.LON||0,name:i.attributes.NAME||"",address:`${(a=i.attributes)==null?void 0:a.STREET} ${(p=i.attributes)==null?void 0:p.CITY} ${(v=i.attributes)==null?void 0:v.STATE} ${(L=i.attributes)==null?void 0:L.ZIP}`,id:i.attributes.NCESSCH||""}):"LATCOD"in i.attributes&&n.push({lat:i.attributes.LATCOD||0,long:i.attributes.LONCOD||0,name:i.attributes.SCH_NAME||"",address:`${(b=i.attributes)==null?void 0:b.LSTREET1} ${(E=i.attributes)==null?void 0:E.LCITY} ${(x=i.attributes)==null?void 0:x.LSTATE} ${(T=i.attributes)==null?void 0:T.LZIP}`,id:i.attributes.NCESSCH||""})),n},[]),[s]);return e($,{children:l&&((h=t.attributes)==null?void 0:h.Lat)&&((u=t.attributes)==null?void 0:u.Long)&&e(le,{mapContainerStyle:{width:"100%",height:400,borderRadius:10},center:{lat:t.attributes.Lat,lng:t.attributes.Long},zoom:10,children:g.map(n=>{var i;return d($,{children:[c==n&&e(de,{position:{lat:n.lat,lng:n.long},onCloseClick:()=>o(null),children:d(w,{p:1,children:[e(m,{fontWeight:"medium",children:n.name}),e(m,{children:n.address}),e(ce,{as:W,to:`/districts/${(i=t.attributes)==null?void 0:i.LEAID}/schools/${n.id}`,colorScheme:"green",size:"xs",children:"View"})]})}),e(ue,{position:{lat:n.lat,lng:n.long},onClick:()=>o(n),children:e(m,{children:n.name})})]})})})})}function Ae(){var L,b;const{districtId:r}=q();if(!r)throw new Error("Missing districtId param from URL");const[t,s]=f.exports.useState(""),[c,o]=f.exports.useState(!1),{loading:l,error:g,data:h}=y(V(r)),{loading:u,error:n,data:i}=y(Te(t,r,{searchPrivate:c})),a=(L=h==null?void 0:h.features)==null?void 0:L[0],p=!l&&!a;return d(k,{loading:l||u,breadcrumb:{content:"Home",to:"/"},title:(b=a==null?void 0:a.attributes)==null?void 0:b.LEA_NAME,children:[p&&d(m,{children:["Couldn't"," find a district with ID ",r]}),(a==null?void 0:a.attributes)&&d(w,{spacing:6,children:[d(K,{spacing:6,justify:"stretch",width:"100%",children:[e(S,{label:"Grades",value:`${a.attributes.GSLO}-${a.attributes.GSHI}`}),e(S,{label:"Schools",value:a.attributes.SCH}),e(S,{label:"Teachers",value:Math.floor(a.attributes.TOTTCH).toLocaleString()}),e(S,{label:"Students",value:Math.floor(a.attributes.MEMBER).toLocaleString()}),e(S,{label:"Students per Teacher",value:a.attributes.STUTERATIO.toLocaleString()})]}),d(w,{spacing:6,alignItems:"stretch",children:[e(S,{label:"Phone",value:a.attributes.PHONE}),e(S,{label:"Address",value:v()})]}),(i==null?void 0:i.features)&&e(Y,{district:a,schools:i==null?void 0:i.features})]})]});function v(){if(!(a==null?void 0:a.attributes))return"";const{LSTREET1:E,LSTREET2:x,LCITY:T,LSTATE:N,LZIP:A}=a.attributes;let I=E;return x&&(I+=` ${x}`),I+=` ${T} ${N} ${A}`,I}}const Re={baseStyle:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},variants:{rounded:{padding:8,borderRadius:"40px",boxShadow:"xl"},smooth:{padding:6,borderRadius:"base",boxShadow:"md"}},defaultProps:{variant:"smooth"}},De={baseStyle:{fontWeight:"bold",borderRadius:"25px",_hover:{bg:"black"}},sizes:{sm:{fontSize:"sm",px:4,py:3},md:{fontSize:"md",px:6,py:4}},variants:{outline:{border:"2px solid"},ghost:{border:"0px solid"},solid:{color:"white"}},defaultProps:{size:"md",variant:"outline"}},$e={baseStyle:{bg:"white"}};var Me=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Button:De,Input:$e});const Ne={brand:{green:"#42E794",darkGreen:"#1E7B75",red:"#FF4658",orange:"#FF6105",lightBlue:"#2ab8ff",darkBlue:"#1467FF",blue:"#2AB8FF",purple:"#630CB2",yellow:"#fff95e"},blue:{500:"#2ab8ff",600:"#1467FF"},yellow:{100:"#fff95e"},red:{100:"#ff4658"},pink:{100:"#e748b9"}},C=he({colors:Ne,components:H({Card:Re},Me)});function M(r){const{color:t=C.colors.brand.blue,size:s=["50%","50%"],globSizes:c=[[40,80],[60,50],[20,80]],globPositions:o=[[20,10],[10,20],[20,15]],top:l,left:g,right:h,bottom:u,opacity:n=1,speed:i,radius:a,rotate:p}=r;return d($,{children:[d("div",{className:"blob",style:{top:l,left:g,right:h,bottom:u,width:s[0],height:s[1],opacity:n,transform:p?`rotate(${p}deg)`:void 0},children:[e("div",{className:"glob",style:{backgroundColor:t,width:c[0][0]+"%",height:c[0][1]+"%",top:o[0][0]+"%",left:o[0][1]+"%",animation:i?`move ${i*1200}ms infinite alternate ease-in-out`:void 0,borderRadius:a}}),e("div",{className:"glob1",style:{backgroundColor:t,width:c[1][0]+"%",height:c[1][1]+"%",top:o[1][0]+"%",left:o[1][1]+"%",animation:i?`move ${i*1e3}ms infinite alternate ease-in-out`:void 0,borderRadius:a}}),e("div",{className:"glob2",style:{backgroundColor:t,width:c[2][0]+"%",height:c[2][1]+"%",top:o[2][0]+"%",left:o[2][1]+"%",animation:i?`move ${i*800}ms infinite alternate ease-in-out`:void 0,borderRadius:a}})]}),e("svg",{className:"glob-svg",xmlns:"http://www.w3.org/2000/svg",version:"1.1",children:e("defs",{children:d("filter",{id:"goo",children:[e("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12",result:"blur"}),e("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9",result:"goo"}),e("feComposite",{in:"SourceGraphic",in2:"goo",operator:"atop"})]})})}),e("svg",{className:"glob-svg",viewBox:"0 0 400 400",children:e("defs",{children:e("filter",{id:"duotone-filter-post-one",children:e("feColorMatrix",{type:"matrix",values:"0.14453125 0 0 0 0.33203125 0.71875 0 0 0 0.27734375 -0.34765625 0 0 0 0.73046875 0 0 0 1 0"})})})})]})}function Pe(){return d(R,{overflow:"hidden",className:"globParent",position:"absolute",width:"100vw",height:"100%",minHeight:"100vh",children:[e(M,{size:["60%","60%"],speed:30,globSizes:[[60,65],[70,80],[30,75]],left:"0%",top:"10%",opacity:.5,color:C.colors.brand.green}),e(M,{size:["600px","600px"],left:"-50px",top:"-20px",color:C.colors.brand.green}),e(M,{size:["60%","60%"],speed:30,globSizes:[[50,90],[80,35],[50,50]],left:"80%",bottom:"-50%",opacity:.5,color:C.colors.brand.darkBlue}),e(M,{size:["60%","70%"],speed:30,globSizes:[[80,55],[50,50],[50,90]],left:"80%",bottom:"-50%",opacity:.5,color:C.colors.brand.blue})]})}function _e(){var v,L,b,E,x,T;const{districtId:r,schoolId:t}=q();if(!r)throw new Error("Missing districtId param from URL");if(!t)throw new Error("Missing schoolId param from URL");f.exports.useState(""),f.exports.useState(!1);const{loading:s,error:c,data:o}=y(V(r)),{loading:l,error:g,data:h}=y(Ce(r,t)),u=(v=o==null?void 0:o.features)==null?void 0:v[0],n=(L=h==null?void 0:h.features)==null?void 0:L[0],i=!s&&!u,a=!l&&!n;return console.log({schoolData:h}),d(k,{loading:s||l,breadcrumb:{content:(b=u==null?void 0:u.attributes)==null?void 0:b.LEA_NAME,to:`/districts/${(E=u==null?void 0:u.attributes)==null?void 0:E.LEAID}`},title:(x=n==null?void 0:n.attributes)==null?void 0:x.SCH_NAME,children:[i&&d(m,{children:["Couldn't"," find a district with ID ",r]}),a&&d(m,{children:["Couldn't"," find a school with ID ",t]}),(n==null?void 0:n.attributes)&&(u==null?void 0:u.attributes)&&d(w,{spacing:3,children:[d(K,{spacing:3,children:[e(S,{value:`${n.attributes.GSLO}-${n.attributes.GSHI}`,label:"Grades"}),e(S,{value:Math.floor(n.attributes.FTE),label:"Teachers"}),e(S,{value:Math.floor(n.attributes.TOTAL),label:"Students"}),e(S,{value:(T=n.attributes.STUTERATIO)==null?void 0:T.toFixed(2),label:"Students per Teacher"})]}),d(w,{spacing:6,alignItems:"stretch",children:[e(S,{label:"Phone",value:n.attributes.PHONE}),e(S,{label:"Address",value:p()})]}),e(Y,{district:u,schools:[n]})]})]});function p(){if(!(n==null?void 0:n.attributes))return"";const{LSTREET1:N,LSTREET2:A,LCITY:I,LSTATE:Z,LZIP:J}=n.attributes;let P=N;return A&&(P+=` ${A}`),P+=` ${I} ${Z} ${J}`,P}}function Fe(){return d("div",{className:"App",children:[e(Le,{}),e(Pe,{}),e(U,{width:"4xl",maxWidth:"100%",zIndex:1,marginTop:B,minHeight:`calc(100vh - ${B})`,paddingTop:20,paddingBottom:20,children:e(fe,{basename:"/cs-react-interview-exercise",children:d(ge,{children:[e(F,{path:"/",element:e(we,{})}),e(F,{path:"/districts/:districtId",element:e(Ae,{})}),e(F,{path:"/districts/:districtId/schools/:schoolId",element:e(_e,{})})]})})})]})}be.render(e(pe.StrictMode,{children:e(me,{theme:C,children:e(Fe,{})})}),document.getElementById("root"));
