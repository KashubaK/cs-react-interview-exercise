var U=Object.defineProperty;var _=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var k=(r,t,i)=>t in r?U(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i,B=(r,t)=>{for(var i in t||(t={}))W.call(t,i)&&k(r,i,t[i]);if(_)for(var i of _(t))q.call(t,i)&&k(r,i,t[i]);return r};import{j as l,B as w,a as e,u as K,T as p,r as g,S as E,C as z,b as I,c as F,F as T,L as V,d as Y,e as J,f as X,I as Z,g as Q,h as ee,G as te,i as re,V as A,M as oe,k as ie,H as ne,l as se,m as ae,R as le,n as $,o as ce,p as de,q as ue}from"./vendor.79c7c0bd.js";const he=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function i(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=i(o);fetch(o.href,a)}};he();var ge="/cs-react-interview-exercise/assets/header_logo.1094da8d.png";const P="80px",fe=({children:r})=>l(w,{className:"cs-header",position:"fixed",top:"0",right:"0",left:"0",width:"100vw",height:P,display:"flex",justifyContent:"center",children:[e("a",{href:"https://characterstrong.com",children:e("img",{className:"header-img",src:ge,alt:"CharacterStrong Logo"})}),r]});function pe(r){const{districts:t}=r,i=K();return e(w,{width:"100%",borderWidth:1,borderRadius:"xl",overflow:"hidden",children:t.map(s=>e(w,{borderBottomWidth:1,p:4,_last:{borderBottomWidth:0},_hover:{backgroundColor:"blackAlpha.50",cursor:"pointer"},onClick:()=>i(`/districts/${s.LEAID}`),children:e(p,{children:s.NAME})}))})}function D(r,t={}){const{method:i="get",lazy:s=i!="get",debounce:o}=t,[a,u]=g.exports.useState(null),[h,c]=g.exports.useState(null),[v,d]=g.exports.useState(!s),n=g.exports.useRef(null),f=g.exports.useRef(new AbortController),b=g.exports.useCallback(async()=>{const m=async()=>{var y;u(null),d(!0),f.current.abort(),f.current=new AbortController;const S=await fetch(r,{signal:f.current.signal});d(!1),S.ok?((y=S.headers.get("Content-Type"))==null?void 0:y.includes("application/json"))?c(await S.json()):console.error("Unable to handle non-JSON response",S):u(S)};typeof o=="number"?(n.current!==null&&clearTimeout(n.current),n.current=window.setTimeout(m,o)):m()},[r,i]);return g.exports.useEffect(()=>{if(!s)return b(),()=>{n.current!==null&&clearTimeout(n.current)}},[b,s]),{loading:v,data:h,error:a,dispatch:b}}function be(r){const t=`UPPER(NAME) LIKE UPPER('%${r}%')`;return`https://nces.ed.gov/opengis/rest/services/K12_School_Locations/EDGE_GEOCODE_PUBLICLEA_1516/MapServer/0/query?where=${encodeURIComponent(t)}&outFields=*&outSR=4326&f=json`}function me(r){const t=`LEAID = '${r}'`;return`https://nces.ed.gov/opengis/rest/services/School_District_Boundaries/EDGE_ADMINDATA_SCHOOLDISTRICTS_SY1920/MapServer/0/query?where=${encodeURIComponent(t)}&outFields=*&outSR=4326&f=json`}function Se(r,t,{searchPrivate:i=!1}){let s=`UPPER(NAME) LIKE UPPER('%${r}%')`;return t!=null&&(s+=` AND LEAID = '${t}'`),`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/${i?"Private_School_Locations_Current":"Public_School_Location_201819"}/FeatureServer/0/query?where=${encodeURIComponent(s)}&outFields=*&outSR=4326&f=json`}function G(r){const{breadcrumb:t,loading:i,title:s,children:o}=r;return e(E,{initialScale:.9,in:!0,children:l(z,{width:"4xl",maxWidth:"100%",backgroundColor:"whiteAlpha.800",p:10,borderRadius:"xl",boxShadow:"xl",backdropFilter:"blur(20px) saturate(180%)",children:[i&&e(I,{children:e(F,{size:"xl"})}),e(E,{initialScale:.9,in:!i,children:!i&&l(T,{children:[t&&l(p,{as:V,to:t.to,display:"flex",align:"center",children:[e(Y,{fontSize:"1.5em",marginLeft:"-6px"}),t.content]}),e(p,{fontSize:"3xl",fontWeight:"bold",marginBottom:6,children:s}),o]})})]})})}const N=10;function ve(){const[r,t]=g.exports.useState("Peninsula School District"),{loading:i,error:s,data:o}=D(be(r),{debounce:300}),a=g.exports.useMemo(()=>o?o.features.map(h=>h.attributes).filter(Boolean):[],[o]),u=g.exports.useMemo(()=>a.slice(0,N),[a]);return l(G,{title:"Search districts",children:[l(J,{marginBottom:4,children:[e(X,{id:"DistrictName",children:"District name"}),e(Z,{size:"lg",value:r,onChange:h=>t(h.target.value),borderRadius:"xl"})]}),i?e(I,{height:"80px",children:e(F,{})}):l(E,{initialScale:.9,in:!i,children:[a.length>0?e(pe,{districts:u}):e(I,{height:"80px",children:e(p,{children:"No results found."})}),a.length>N&&l(p,{marginTop:4,children:[(a.length-N).toLocaleString()," district(s) not shown. Please refine your search."]})]})]})}function xe(){return e(E,{initialScale:.9,in:!0,children:e(ve,{})})}function x(r){return l(Q,{borderWidth:1,borderRadius:"xl",minWidth:"90px",p:4,align:"center",backgroundColor:"white",flexGrow:1,children:[e(p,{fontWeight:"medium",fontSize:22,children:r.value}),e(p,{textTransform:"uppercase",fontSize:10,fontWeight:"bold",children:r.label}),r.afterValue]})}const Le="AIzaSyB4xIAr7G7f9emydvsTtXsGG5KLjPW6im4";function ye(r){var u,h;const{district:t,schools:i}=r,[s,o]=g.exports.useState(null),{isLoaded:a}=ee({id:"google-map-script",googleMapsApiKey:Le});return e(T,{children:a&&((u=t.attributes)==null?void 0:u.Lat)&&((h=t.attributes)==null?void 0:h.Long)&&e(te,{mapContainerStyle:{width:"100%",height:400,borderRadius:10},center:{lat:t.attributes.Lat,lng:t.attributes.Long},zoom:10,children:i.map(c=>{var v,d,n,f,b,m;return((v=c.attributes)==null?void 0:v.LAT)&&c.attributes.LON&&l(T,{children:[s==c&&e(re,{position:{lat:c.attributes.LAT,lng:c.attributes.LON},onCloseClick:()=>o(null),children:l(A,{p:1,children:[e(p,{fontWeight:"medium",children:(d=c.attributes)==null?void 0:d.NAME}),l(p,{children:[(n=c.attributes)==null?void 0:n.STREET," ",(f=c.attributes)==null?void 0:f.CITY," ",(b=c.attributes)==null?void 0:b.STATE," ",(m=c.attributes)==null?void 0:m.ZIP]})]})}),e(oe,{position:{lat:c.attributes.LAT,lng:c.attributes.LON},onClick:()=>o(c),children:e(p,{children:c.attributes.NAME})})]})})})})}function we(){var m,S;const{districtId:r}=ie();if(!r)throw new Error("Missing districtId param from URL");const[t,i]=g.exports.useState(""),[s,o]=g.exports.useState(!1),{loading:a,error:u,data:h}=D(me(r)),{loading:c,error:v,data:d}=D(Se(t,r,{searchPrivate:s})),n=(m=h==null?void 0:h.features)==null?void 0:m[0],f=!a&&!n;return l(G,{loading:a||c,breadcrumb:{content:"Home",to:"/"},title:(S=n==null?void 0:n.attributes)==null?void 0:S.LEA_NAME,children:[f&&l(p,{children:["Couldn't"," find a district with ID ",r]}),(n==null?void 0:n.attributes)&&l(A,{spacing:6,children:[l(ne,{spacing:6,justify:"stretch",width:"100%",children:[e(x,{label:"Grades",value:`${n.attributes.GSLO}-${n.attributes.GSHI}`}),e(x,{label:"Schools",value:n.attributes.SCH}),e(x,{label:"Teachers",value:Math.floor(n.attributes.TOTTCH).toLocaleString()}),e(x,{label:"Students",value:Math.floor(n.attributes.MEMBER).toLocaleString()}),e(x,{label:"Students per Teacher",value:n.attributes.STUTERATIO.toLocaleString()})]}),l(A,{spacing:6,alignItems:"stretch",children:[e(x,{label:"Phone",value:n.attributes.PHONE}),e(x,{label:"Address",value:b()})]}),(d==null?void 0:d.features)&&e(ye,{district:n,schools:d==null?void 0:d.features})]})]});function b(){if(!(n==null?void 0:n.attributes))return"";const{LSTREET1:y,LSTREET2:M,LCITY:O,LSTATE:j,LZIP:H}=n.attributes;let R=y;return M&&(R+=` ${M}`),R+=` ${O} ${j} ${H}`,R}}const Ee={baseStyle:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},variants:{rounded:{padding:8,borderRadius:"40px",boxShadow:"xl"},smooth:{padding:6,borderRadius:"base",boxShadow:"md"}},defaultProps:{variant:"smooth"}},Te={baseStyle:{fontWeight:"bold",borderRadius:"25px",_hover:{bg:"black"}},sizes:{sm:{fontSize:"sm",px:4,py:3},md:{fontSize:"md",px:6,py:4}},variants:{outline:{border:"2px solid"},ghost:{border:"0px solid"},solid:{color:"white"}},defaultProps:{size:"md",variant:"outline"}},Ce={baseStyle:{bg:"white"}};var Re=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Button:Te,Input:Ce});const Ie={brand:{green:"#42E794",darkGreen:"#1E7B75",red:"#FF4658",orange:"#FF6105",lightBlue:"#2ab8ff",darkBlue:"#1467FF",blue:"#2AB8FF",purple:"#630CB2",yellow:"#fff95e"},blue:{500:"#2ab8ff",600:"#1467FF"},yellow:{100:"#fff95e"},red:{100:"#ff4658"},pink:{100:"#e748b9"}},L=se({colors:Ie,components:B({Card:Ee},Re)});function C(r){const{color:t=L.colors.brand.blue,size:i=["50%","50%"],globSizes:s=[[40,80],[60,50],[20,80]],globPositions:o=[[20,10],[10,20],[20,15]],top:a,left:u,right:h,bottom:c,opacity:v=1,speed:d,radius:n,rotate:f}=r;return l(T,{children:[l("div",{className:"blob",style:{top:a,left:u,right:h,bottom:c,width:i[0],height:i[1],opacity:v,transform:f?`rotate(${f}deg)`:void 0},children:[e("div",{className:"glob",style:{backgroundColor:t,width:s[0][0]+"%",height:s[0][1]+"%",top:o[0][0]+"%",left:o[0][1]+"%",animation:d?`move ${d*1200}ms infinite alternate ease-in-out`:void 0,borderRadius:n}}),e("div",{className:"glob1",style:{backgroundColor:t,width:s[1][0]+"%",height:s[1][1]+"%",top:o[1][0]+"%",left:o[1][1]+"%",animation:d?`move ${d*1e3}ms infinite alternate ease-in-out`:void 0,borderRadius:n}}),e("div",{className:"glob2",style:{backgroundColor:t,width:s[2][0]+"%",height:s[2][1]+"%",top:o[2][0]+"%",left:o[2][1]+"%",animation:d?`move ${d*800}ms infinite alternate ease-in-out`:void 0,borderRadius:n}})]}),e("svg",{className:"glob-svg",xmlns:"http://www.w3.org/2000/svg",version:"1.1",children:e("defs",{children:l("filter",{id:"goo",children:[e("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12",result:"blur"}),e("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9",result:"goo"}),e("feComposite",{in:"SourceGraphic",in2:"goo",operator:"atop"})]})})}),e("svg",{className:"glob-svg",viewBox:"0 0 400 400",children:e("defs",{children:e("filter",{id:"duotone-filter-post-one",children:e("feColorMatrix",{type:"matrix",values:"0.14453125 0 0 0 0.33203125 0.71875 0 0 0 0.27734375 -0.34765625 0 0 0 0.73046875 0 0 0 1 0"})})})})]})}function Ae(){return l(w,{overflow:"hidden",className:"globParent",position:"absolute",width:"100vw",height:"100%",minHeight:"100vh",children:[e(C,{size:["60%","60%"],speed:30,globSizes:[[60,65],[70,80],[30,75]],left:"0%",top:"10%",opacity:.5,color:L.colors.brand.green}),e(C,{size:["600px","600px"],left:"-50px",top:"-20px",color:L.colors.brand.green}),e(C,{size:["60%","60%"],speed:30,globSizes:[[50,90],[80,35],[50,50]],left:"80%",bottom:"-50%",opacity:.5,color:L.colors.brand.darkBlue}),e(C,{size:["60%","70%"],speed:30,globSizes:[[80,55],[50,50],[50,90]],left:"80%",bottom:"-50%",opacity:.5,color:L.colors.brand.blue})]})}function Pe(){return l("div",{className:"App",children:[e(fe,{}),e(Ae,{}),e(z,{width:"4xl",maxWidth:"100%",zIndex:1,marginTop:P,minHeight:`calc(100vh - ${P})`,paddingTop:20,paddingBottom:20,children:e(ae,{basename:"/cs-react-interview-exercise",children:l(le,{children:[e($,{path:"/",element:e(xe,{})}),e($,{path:"/districts/:districtId",element:e(we,{})})]})})})]})}ce.render(e(de.StrictMode,{children:e(ue,{theme:L,children:e(Pe,{})})}),document.getElementById("root"));
