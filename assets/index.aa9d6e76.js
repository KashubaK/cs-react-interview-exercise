var W=Object.defineProperty;var M=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var N=(r,t,i)=>t in r?W(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i,_=(r,t)=>{for(var i in t||(t={}))j.call(t,i)&&N(r,i,t[i]);if(M)for(var i of M(t))q.call(t,i)&&N(r,i,t[i]);return r};import{e as K,j as l,F as L,a as e,B as E,u as V,T as p,r as g,S as T,C as k,b as B,c as F,L as Y,d as J,f as X,g as Z,I as Q,h as ee,i as te,G as re,k as oe,V as R,M as ie,l as ne,H as se,m as ae,R as le,n as $,o as ce,p as de,q as ue}from"./vendor.ca729d47.js";const he=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function i(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=i(o);fetch(o.href,a)}};he();var ge="/assets/header_logo.1094da8d.png";const fe={baseStyle:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},variants:{rounded:{padding:8,borderRadius:"40px",boxShadow:"xl"},smooth:{padding:6,borderRadius:"base",boxShadow:"md"}},defaultProps:{variant:"smooth"}},pe={baseStyle:{fontWeight:"bold",borderRadius:"25px",_hover:{bg:"black"}},sizes:{sm:{fontSize:"sm",px:4,py:3},md:{fontSize:"md",px:6,py:4}},variants:{outline:{border:"2px solid"},ghost:{border:"0px solid"},solid:{color:"white"}},defaultProps:{size:"md",variant:"outline"}},be={baseStyle:{bg:"white"}};var me=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Button:pe,Input:be});const Se={brand:{green:"#42E794",darkGreen:"#1E7B75",red:"#FF4658",orange:"#FF6105",lightBlue:"#2ab8ff",darkBlue:"#1467FF",blue:"#2AB8FF",purple:"#630CB2",yellow:"#fff95e"},blue:{500:"#2ab8ff",600:"#1467FF"},yellow:{100:"#fff95e"},red:{100:"#ff4658"},pink:{100:"#e748b9"}},w=K({colors:Se,components:_({Card:fe},me)});function z(r){const{color:t=w.colors.brand.blue,size:i=["50%","50%"],globSizes:s=[[40,80],[60,50],[20,80]],globPositions:o=[[20,10],[10,20],[20,15]],top:a,left:u,right:h,bottom:c,opacity:v=1,speed:d,radius:n,rotate:f}=r;return l(L,{children:[l("div",{className:"blob",style:{top:a,left:u,right:h,bottom:c,width:i[0],height:i[1],opacity:v,transform:f?`rotate(${f}deg)`:void 0},children:[e("div",{className:"glob",style:{backgroundColor:t,width:s[0][0]+"%",height:s[0][1]+"%",top:o[0][0]+"%",left:o[0][1]+"%",animation:d?`move ${d*1200}ms infinite alternate ease-in-out`:void 0,borderRadius:n}}),e("div",{className:"glob1",style:{backgroundColor:t,width:s[1][0]+"%",height:s[1][1]+"%",top:o[1][0]+"%",left:o[1][1]+"%",animation:d?`move ${d*1e3}ms infinite alternate ease-in-out`:void 0,borderRadius:n}}),e("div",{className:"glob2",style:{backgroundColor:t,width:s[2][0]+"%",height:s[2][1]+"%",top:o[2][0]+"%",left:o[2][1]+"%",animation:d?`move ${d*800}ms infinite alternate ease-in-out`:void 0,borderRadius:n}})]}),e("svg",{className:"glob-svg",xmlns:"http://www.w3.org/2000/svg",version:"1.1",children:e("defs",{children:l("filter",{id:"goo",children:[e("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12",result:"blur"}),e("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9",result:"goo"}),e("feComposite",{in:"SourceGraphic",in2:"goo",operator:"atop"})]})})}),e("svg",{className:"glob-svg",viewBox:"0 0 400 400",children:e("defs",{children:e("filter",{id:"duotone-filter-post-one",children:e("feColorMatrix",{type:"matrix",values:"0.14453125 0 0 0 0.33203125 0.71875 0 0 0 0.27734375 -0.34765625 0 0 0 0.73046875 0 0 0 1 0"})})})})]})}const I="80px",ve=({children:r})=>l(L,{children:[l(E,{overflow:"hidden",className:"globParent",position:"absolute",width:"100vw",height:"100%",minHeight:"100vh",children:[e(z,{size:["60%","60%"],speed:30,globSizes:[[60,65],[70,80],[30,75]],left:"0%",top:"10%",opacity:.5,color:w.colors.brand.green}),e(z,{size:["600px","600px"],left:"-50px",top:"-20px",color:w.colors.brand.green})]}),l(E,{className:"cs-header",position:"fixed",top:"0",right:"0",left:"0",width:"100vw",height:I,children:[e("a",{href:"https://characterstrong.com",children:e("img",{className:"header-img",src:ge,alt:"CharacterStrong Logo"})}),r]})]});function xe(r){const{districts:t}=r,i=V();return e(E,{width:"100%",borderWidth:1,borderRadius:"xl",overflow:"hidden",children:t.map(s=>e(E,{borderBottomWidth:1,p:4,_last:{borderBottomWidth:0},_hover:{backgroundColor:"blackAlpha.50",cursor:"pointer"},onClick:()=>i(`/districts/${s.LEAID}`),children:e(p,{children:s.NAME})}))})}function A(r,t={}){const{method:i="get",lazy:s=i!="get",debounce:o}=t,[a,u]=g.exports.useState(null),[h,c]=g.exports.useState(null),[v,d]=g.exports.useState(!s),n=g.exports.useRef(null),f=g.exports.useRef(new AbortController),b=g.exports.useCallback(async()=>{const m=async()=>{var y;u(null),d(!0),f.current.abort(),f.current=new AbortController;const S=await fetch(r,{signal:f.current.signal});d(!1),S.ok?((y=S.headers.get("Content-Type"))==null?void 0:y.includes("application/json"))?c(await S.json()):console.error("Unable to handle non-JSON response",S):u(S)};typeof o=="number"?(n.current!==null&&clearTimeout(n.current),n.current=window.setTimeout(m,o)):m()},[r,i]);return g.exports.useEffect(()=>{if(!s)return b(),()=>{n.current!==null&&clearTimeout(n.current)}},[b,s]),{loading:v,data:h,error:a,dispatch:b}}function Le(r){const t=`UPPER(NAME) LIKE UPPER('%${r}%')`;return`https://nces.ed.gov/opengis/rest/services/K12_School_Locations/EDGE_GEOCODE_PUBLICLEA_1516/MapServer/0/query?where=${encodeURIComponent(t)}&outFields=*&outSR=4326&f=json`}function ye(r){const t=`LEAID = '${r}'`;return`https://nces.ed.gov/opengis/rest/services/School_District_Boundaries/EDGE_ADMINDATA_SCHOOLDISTRICTS_SY1920/MapServer/0/query?where=${encodeURIComponent(t)}&outFields=*&outSR=4326&f=json`}function Ee(r,t,{searchPrivate:i=!1}){let s=`UPPER(NAME) LIKE UPPER('%${r}%')`;return t!=null&&(s+=` AND LEAID = '${t}'`),`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/${i?"Private_School_Locations_Current":"Public_School_Location_201819"}/FeatureServer/0/query?where=${encodeURIComponent(s)}&outFields=*&outSR=4326&f=json`}function G(r){const{breadcrumb:t,loading:i,title:s,children:o}=r;return e(T,{initialScale:.9,in:!0,children:l(k,{width:"4xl",maxWidth:"100%",backgroundColor:"whiteAlpha.800",p:10,borderRadius:"xl",boxShadow:"xl",backdropFilter:"blur(20px) saturate(180%)",children:[i&&e(B,{children:e(F,{size:"xl"})}),e(T,{initialScale:.9,in:!i,children:!i&&l(L,{children:[t&&l(p,{as:Y,to:t.to,display:"flex",align:"center",children:[e(J,{fontSize:"1.5em",marginLeft:"-6px"}),t.content]}),e(p,{fontSize:"3xl",fontWeight:"bold",marginBottom:6,children:s}),o]})})]})})}const D=10;function Te(){const[r,t]=g.exports.useState("Peninsula School District"),{loading:i,error:s,data:o}=A(Le(r),{debounce:300}),a=g.exports.useMemo(()=>o?o.features.map(h=>h.attributes).filter(Boolean):[],[o]),u=g.exports.useMemo(()=>a.slice(0,D),[a]);return l(G,{title:"Search districts",children:[l(X,{marginBottom:4,children:[e(Z,{id:"DistrictName",children:"District name"}),e(Q,{size:"lg",value:r,onChange:h=>t(h.target.value),borderRadius:"xl"})]}),i?e(B,{height:"80px",children:e(F,{})}):l(T,{initialScale:.9,in:!i,children:[e(xe,{districts:u}),a.length>D&&l(p,{marginTop:4,children:[(a.length-D).toLocaleString()," district(s) not shown. Please refine your search."]})]})]})}function we(){return e(T,{initialScale:.9,in:!0,children:e(Te,{})})}function x(r){return l(ee,{borderWidth:1,borderRadius:"xl",minWidth:"90px",p:4,align:"center",backgroundColor:"white",flexGrow:1,children:[e(p,{fontWeight:"medium",fontSize:22,children:r.value}),e(p,{textTransform:"uppercase",fontSize:10,fontWeight:"bold",children:r.label}),r.afterValue]})}const Ce="AIzaSyB4xIAr7G7f9emydvsTtXsGG5KLjPW6im4";function Re(r){var u,h;const{district:t,schools:i}=r,[s,o]=g.exports.useState(null),{isLoaded:a}=te({id:"google-map-script",googleMapsApiKey:Ce});return e(L,{children:a&&((u=t.attributes)==null?void 0:u.Lat)&&((h=t.attributes)==null?void 0:h.Long)&&e(re,{mapContainerStyle:{width:"100%",height:400,borderRadius:10},center:{lat:t.attributes.Lat,lng:t.attributes.Long},zoom:10,children:i.map(c=>{var v,d,n,f,b,m;return((v=c.attributes)==null?void 0:v.LAT)&&c.attributes.LON&&l(L,{children:[s==c&&e(oe,{position:{lat:c.attributes.LAT,lng:c.attributes.LON},onCloseClick:()=>o(null),children:l(R,{p:1,children:[e(p,{fontWeight:"medium",children:(d=c.attributes)==null?void 0:d.NAME}),l(p,{children:[(n=c.attributes)==null?void 0:n.STREET," ",(f=c.attributes)==null?void 0:f.CITY," ",(b=c.attributes)==null?void 0:b.STATE," ",(m=c.attributes)==null?void 0:m.ZIP]})]})}),e(ie,{position:{lat:c.attributes.LAT,lng:c.attributes.LON},onClick:()=>o(c),children:e(p,{children:c.attributes.NAME})})]})})})})}function Ie(){var m,S;const{districtId:r}=ne();if(!r)throw new Error("Missing districtId param from URL");const[t,i]=g.exports.useState(""),[s,o]=g.exports.useState(!1),{loading:a,error:u,data:h}=A(ye(r)),{loading:c,error:v,data:d}=A(Ee(t,r,{searchPrivate:s})),n=(m=h==null?void 0:h.features)==null?void 0:m[0],f=!a&&!n;return l(G,{loading:a||c,breadcrumb:{content:"Home",to:"/"},title:(S=n==null?void 0:n.attributes)==null?void 0:S.LEA_NAME,children:[f&&l(p,{children:["Couldn't"," find a district with ID ",r]}),(n==null?void 0:n.attributes)&&l(R,{spacing:6,children:[l(se,{spacing:6,justify:"stretch",width:"100%",children:[e(x,{label:"Grades",value:`${n.attributes.GSLO}-${n.attributes.GSHI}`}),e(x,{label:"Schools",value:n.attributes.SCH}),e(x,{label:"Teachers",value:Math.floor(n.attributes.TOTTCH).toLocaleString()}),e(x,{label:"Students",value:Math.floor(n.attributes.MEMBER).toLocaleString()}),e(x,{label:"Students per Teacher",value:n.attributes.STUTERATIO.toLocaleString()})]}),l(R,{spacing:6,alignItems:"stretch",children:[e(x,{label:"Phone",value:n.attributes.PHONE}),e(x,{label:"Address",value:b()})]}),(d==null?void 0:d.features)&&e(Re,{district:n,schools:d==null?void 0:d.features})]})]});function b(){if(!(n==null?void 0:n.attributes))return"";const{LSTREET1:y,LSTREET2:P,LCITY:O,LSTATE:H,LZIP:U}=n.attributes;let C=y;return P&&(C+=` ${P}`),C+=` ${O} ${H} ${U}`,C}}function Ae(){return l("div",{className:"App",children:[e(ve,{}),e(k,{width:"4xl",maxWidth:"100%",zIndex:1,marginTop:I,minHeight:`calc(100vh - ${I})`,paddingTop:20,paddingBottom:20,children:e(ae,{children:l(le,{children:[e($,{path:"/",element:e(we,{})}),e($,{path:"/districts/:districtId",element:e(Ie,{})})]})})})]})}ce.render(e(de.StrictMode,{children:e(ue,{theme:w,children:e(Ae,{})})}),document.getElementById("root"));
