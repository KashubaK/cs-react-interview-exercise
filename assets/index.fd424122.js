var J=Object.defineProperty;var B=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var z=(i,t,o)=>t in i?J(i,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[t]=o,H=(i,t)=>{for(var o in t||(t={}))X.call(t,o)&&z(i,o,t[o]);if(B)for(var o of B(t))Q.call(t,o)&&z(i,o,t[o]);return i};import{j as c,B as R,a as e,u as ee,T as f,r as p,S as D,C as O,b as N,c as U,F as $,L as j,d as te,e as re,f as ie,I as ne,g as oe,h as ae,G as se,i as le,V as A,k as de,M as ce,l as W,H as K,m as ue,n as he,o as be,R as ge,p as _,q as fe,s as pe,t as me}from"./vendor.8aa8543d.js";const Se=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}};Se();var ve="/cs-react-interview-exercise/assets/header_logo.1094da8d.png";const F="80px",Le=({children:i})=>c(R,{className:"cs-header",position:"fixed",top:"0",right:"0",left:"0",width:"100vw",height:F,display:"flex",justifyContent:"center",children:[e("a",{href:"https://characterstrong.com",children:e("img",{className:"header-img",src:ve,alt:"CharacterStrong Logo"})}),i]});function Te(i){const{districts:t}=i,o=ee();return e(R,{width:"100%",borderWidth:1,borderRadius:"xl",overflow:"hidden",children:t.map(s=>e(R,{borderBottomWidth:1,p:4,_last:{borderBottomWidth:0},_hover:{backgroundColor:"blackAlpha.50",cursor:"pointer"},onClick:()=>o(`/districts/${s.LEAID}`),children:e(f,{children:s.NAME})},s.LEAID))})}function w(i,t={}){const{method:o="get",lazy:s=o!="get",debounce:r}=t,[n,d]=p.exports.useState(null),[l,v]=p.exports.useState(null),[u,a]=p.exports.useState(!s),h=p.exports.useRef(null),g=p.exports.useRef(new AbortController),L=p.exports.useCallback(async()=>{const T=async()=>{var E;d(null),a(!0),g.current.abort(),g.current=new AbortController;const b=await fetch(i,{signal:g.current.signal});a(!1),b.ok?((E=b.headers.get("Content-Type"))==null?void 0:E.includes("application/json"))?v(await b.json()):console.error("Unable to handle non-JSON response",b):d(b)};typeof r=="number"?(h.current!==null&&clearTimeout(h.current),h.current=window.setTimeout(T,r)):T()},[i,r]);return p.exports.useEffect(()=>{if(!s)return L(),()=>{h.current!==null&&clearTimeout(h.current)}},[L,s]),{loading:u,data:l,error:n,dispatch:L}}function Ee(i){const t=`UPPER(NAME) LIKE UPPER('%${i}%')`;return`https://nces.ed.gov/opengis/rest/services/K12_School_Locations/EDGE_GEOCODE_PUBLICLEA_1516/MapServer/0/query?where=${encodeURIComponent(t)}&outFields=*&outSR=4326&f=json`}function q(i){const t=`LEAID = '${i}'`;return`https://nces.ed.gov/opengis/rest/services/School_District_Boundaries/EDGE_ADMINDATA_SCHOOLDISTRICTS_SY1920/MapServer/0/query?where=${encodeURIComponent(t)}&outFields=*&outSR=4326&f=json`}function xe(i,t,{searchPrivate:o=!1}){let s=`UPPER(NAME) LIKE UPPER('%${i}%')`;return t!=null&&(s+=` AND LEAID = '${t}'`),`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/${o?"Private_School_Locations_Current":"Public_School_Location_201819"}/FeatureServer/0/query?where=${encodeURIComponent(s)}&outFields=*&outSR=4326&f=json`}function Ce(i,t){const o=`LEAID = '${i}' AND NCESSCH = '${t}'`;return`https://nces.ed.gov/opengis/rest/services/K12_School_Locations/EDGE_ADMINDATA_PUBLICSCH_1920/MapServer/0/query?outFields=*&where=${encodeURIComponent(o)}&f=json`}function G(i){const{breadcrumb:t,loading:o,title:s,children:r}=i;return e(D,{initialScale:.9,in:!0,children:c(O,{width:"4xl",maxWidth:"100%",backgroundColor:"whiteAlpha.800",p:10,borderRadius:"xl",boxShadow:"xl",backdropFilter:"blur(20px) saturate(180%)",children:[o&&e(N,{children:e(U,{size:"xl"})}),e(D,{initialScale:.9,in:!o,children:!o&&c($,{children:[t&&c(f,{as:j,to:t.to,display:"flex",align:"center",children:[e(te,{fontSize:"1.5em",marginLeft:"-6px"}),t.content]}),e(f,{fontSize:"3xl",fontWeight:"bold",marginBottom:6,children:s}),r]})})]})})}const k=10;function Ie(){const[i,t]=p.exports.useState("Peninsula School District"),{loading:o,data:s}=w(Ee(i),{debounce:300}),r=p.exports.useMemo(()=>s?s.features.map(d=>d.attributes).filter(Boolean):[],[s]),n=p.exports.useMemo(()=>r.slice(0,k),[r]);return c(G,{title:"Search districts",children:[c(re,{marginBottom:4,children:[e(ie,{id:"DistrictName",children:"District name"}),e(ne,{size:"lg",value:i,onChange:d=>t(d.target.value),borderRadius:"xl"})]}),o?e(N,{height:"80px",children:e(U,{})}):c(D,{initialScale:.9,in:!o,children:[r.length>0?e(Te,{districts:n}):e(N,{height:"80px",children:e(f,{children:"No results found."})}),r.length>k&&c(f,{marginTop:4,children:[(r.length-k).toLocaleString()," district(s) not shown. Please refine your search."]})]})]})}function ye(){return e(D,{initialScale:.9,in:!0,children:e(Ie,{})})}function m(i){return c(oe,{borderWidth:1,borderRadius:"xl",minWidth:"90px",p:4,align:"center",backgroundColor:"white",flexGrow:1,children:[e(f,{fontWeight:"medium",fontSize:22,children:i.value}),e(f,{textTransform:"uppercase",fontSize:10,fontWeight:"bold",children:i.label}),i.afterValue]})}const Ae="AIzaSyB4xIAr7G7f9emydvsTtXsGG5KLjPW6im4";function V(i){var l,v;const{district:t,schools:o}=i,[s,r]=p.exports.useState(null),{isLoaded:n}=ae({id:"google-map-script",googleMapsApiKey:Ae}),d=p.exports.useMemo(()=>o.reduce((u,a)=>{var h,g,L,T,b,E,y,C;return(a==null?void 0:a.attributes)&&("LAT"in a.attributes?u.push({lat:a.attributes.LAT||0,long:a.attributes.LON||0,name:a.attributes.NAME||"",address:`${(h=a.attributes)==null?void 0:h.STREET} ${(g=a.attributes)==null?void 0:g.CITY} ${(L=a.attributes)==null?void 0:L.STATE} ${(T=a.attributes)==null?void 0:T.ZIP}`,id:a.attributes.NCESSCH||""}):"LATCOD"in a.attributes&&u.push({lat:a.attributes.LATCOD||0,long:a.attributes.LONCOD||0,name:a.attributes.SCH_NAME||"",address:`${(b=a.attributes)==null?void 0:b.LSTREET1} ${(E=a.attributes)==null?void 0:E.LCITY} ${(y=a.attributes)==null?void 0:y.LSTATE} ${(C=a.attributes)==null?void 0:C.LZIP}`,id:a.attributes.NCESSCH||""})),u},[]),[o]);return e($,{children:n&&((l=t.attributes)==null?void 0:l.Lat)&&((v=t.attributes)==null?void 0:v.Long)&&e(se,{mapContainerStyle:{width:"100%",height:400,borderRadius:10},center:{lat:t.attributes.Lat,lng:t.attributes.Long},zoom:10,children:d.map(u=>{var a;return c($,{children:[s==u&&e(le,{position:{lat:u.lat,lng:u.long},onCloseClick:()=>r(null),children:c(A,{p:1,children:[e(f,{fontWeight:"medium",children:u.name}),e(f,{children:u.address}),e(de,{as:j,to:`/districts/${(a=t.attributes)==null?void 0:a.LEAID}/schools/${u.id}`,colorScheme:"green",size:"xs",children:"View"})]})}),e(ce,{position:{lat:u.lat,lng:u.long},onClick:()=>r(u),children:e(f,{children:u.name})})]})})})})}function we(){var v,u;const{districtId:i}=W();if(!i)throw new Error("Missing districtId param from URL");const{loading:t,data:o}=w(q(i)),{loading:s,data:r}=w(xe("",i,{searchPrivate:!1})),n=(v=o==null?void 0:o.features)==null?void 0:v[0],d=!t&&!n;return c(G,{loading:t||s,breadcrumb:{content:"Home",to:"/"},title:(u=n==null?void 0:n.attributes)==null?void 0:u.LEA_NAME,children:[d&&c(f,{children:["Couldn't"," find a district with ID ",i]}),(n==null?void 0:n.attributes)&&c(A,{spacing:6,children:[c(K,{spacing:6,justify:"stretch",width:"100%",children:[e(m,{label:"Grades",value:`${n.attributes.GSLO}-${n.attributes.GSHI}`}),e(m,{label:"Schools",value:n.attributes.SCH}),e(m,{label:"Teachers",value:Math.floor(n.attributes.TOTTCH).toLocaleString()}),e(m,{label:"Students",value:Math.floor(n.attributes.MEMBER).toLocaleString()}),e(m,{label:"Students per Teacher",value:n.attributes.STUTERATIO.toLocaleString()})]}),c(A,{spacing:6,alignItems:"stretch",children:[e(m,{label:"Phone",value:n.attributes.PHONE}),e(m,{label:"Address",value:l()})]}),(r==null?void 0:r.features)&&e(V,{district:n,schools:r==null?void 0:r.features})]})]});function l(){if(!(n==null?void 0:n.attributes))return"";const{LSTREET1:a,LSTREET2:h,LCITY:g,LSTATE:L,LZIP:T}=n.attributes;let b=a;return h&&(b+=` ${h}`),b+=` ${g} ${L} ${T}`,b}}const Re={baseStyle:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},variants:{rounded:{padding:8,borderRadius:"40px",boxShadow:"xl"},smooth:{padding:6,borderRadius:"base",boxShadow:"md"}},defaultProps:{variant:"smooth"}},De={baseStyle:{fontWeight:"bold",borderRadius:"25px",_hover:{bg:"black"}},sizes:{sm:{fontSize:"sm",px:4,py:3},md:{fontSize:"md",px:6,py:4}},variants:{outline:{border:"2px solid"},ghost:{border:"0px solid"},solid:{color:"white"}},defaultProps:{size:"md",variant:"outline"}},$e={baseStyle:{bg:"white"}};var Me=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Button:De,Input:$e});const Pe={brand:{green:"#42E794",darkGreen:"#1E7B75",red:"#FF4658",orange:"#FF6105",lightBlue:"#2ab8ff",darkBlue:"#1467FF",blue:"#2AB8FF",purple:"#630CB2",yellow:"#fff95e"},blue:{500:"#2ab8ff",600:"#1467FF"},yellow:{100:"#fff95e"},red:{100:"#ff4658"},pink:{100:"#e748b9"}},x=ue({colors:Pe,components:H({Card:Re},Me)});function M(i){const{color:t=x.colors.brand.blue,size:o=["50%","50%"],globSizes:s=[[40,80],[60,50],[20,80]],globPositions:r=[[20,10],[10,20],[20,15]],top:n,left:d,right:l,bottom:v,opacity:u=1,speed:a,radius:h,rotate:g}=i;return c($,{children:[c("div",{className:"blob",style:{top:n,left:d,right:l,bottom:v,width:o[0],height:o[1],opacity:u,transform:g?`rotate(${g}deg)`:void 0},children:[e("div",{className:"glob",style:{backgroundColor:t,width:s[0][0]+"%",height:s[0][1]+"%",top:r[0][0]+"%",left:r[0][1]+"%",animation:a?`move ${a*1200}ms infinite alternate ease-in-out`:void 0,borderRadius:h}}),e("div",{className:"glob1",style:{backgroundColor:t,width:s[1][0]+"%",height:s[1][1]+"%",top:r[1][0]+"%",left:r[1][1]+"%",animation:a?`move ${a*1e3}ms infinite alternate ease-in-out`:void 0,borderRadius:h}}),e("div",{className:"glob2",style:{backgroundColor:t,width:s[2][0]+"%",height:s[2][1]+"%",top:r[2][0]+"%",left:r[2][1]+"%",animation:a?`move ${a*800}ms infinite alternate ease-in-out`:void 0,borderRadius:h}})]}),e("svg",{className:"glob-svg",xmlns:"http://www.w3.org/2000/svg",version:"1.1",children:e("defs",{children:c("filter",{id:"goo",children:[e("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12",result:"blur"}),e("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9",result:"goo"}),e("feComposite",{in:"SourceGraphic",in2:"goo",operator:"atop"})]})})}),e("svg",{className:"glob-svg",viewBox:"0 0 400 400",children:e("defs",{children:e("filter",{id:"duotone-filter-post-one",children:e("feColorMatrix",{type:"matrix",values:"0.14453125 0 0 0 0.33203125 0.71875 0 0 0 0.27734375 -0.34765625 0 0 0 0.73046875 0 0 0 1 0"})})})})]})}function Ne(){return c(R,{overflow:"hidden",className:"globParent",position:"absolute",width:"100vw",height:"100%",minHeight:"100vh",children:[e(M,{size:["60%","60%"],speed:30,globSizes:[[60,65],[70,80],[30,75]],left:"0%",top:"10%",opacity:.5,color:x.colors.brand.green}),e(M,{size:["600px","600px"],left:"-50px",top:"-20px",color:x.colors.brand.green}),e(M,{size:["60%","60%"],speed:30,globSizes:[[50,90],[80,35],[50,50]],left:"80%",bottom:"-50%",opacity:.5,color:x.colors.brand.darkBlue}),e(M,{size:["60%","70%"],speed:30,globSizes:[[80,55],[50,50],[50,90]],left:"80%",bottom:"-50%",opacity:.5,color:x.colors.brand.blue})]})}function _e(){var g,L,T,b,E,y;const{districtId:i,schoolId:t}=W();if(!i)throw new Error("Missing districtId param from URL");if(!t)throw new Error("Missing schoolId param from URL");const{loading:o,data:s}=w(q(i)),{loading:r,data:n}=w(Ce(i,t)),d=(g=s==null?void 0:s.features)==null?void 0:g[0],l=(L=n==null?void 0:n.features)==null?void 0:L[0],v=!o&&!d,u=!r&&!l,a=p.exports.useMemo(()=>{if(!(l==null?void 0:l.attributes))return null;const C=Object.keys(l.attributes).filter(S=>/G[0-9]+|PK|KG/.test(S)).filter(S=>{var I;return((I=l.attributes)==null?void 0:I[S])!=null});return{labels:C.map(S=>S=="PK"?"Pre-kindergarten":S=="KG"?"Kindergarten":S.replace("G","Grade ")),datasets:[{label:"Student count",data:C.map(S=>{var I;return(I=l.attributes)==null?void 0:I[S]}),backgroundColor:[x.colors.green["500"]],borderColor:[x.colors.green["500"]],borderWidth:1,barThickness:50,pointStyle:"rectRounded"}]}},[l]);return c(G,{loading:o||r,breadcrumb:{content:(T=d==null?void 0:d.attributes)==null?void 0:T.LEA_NAME,to:`/districts/${(b=d==null?void 0:d.attributes)==null?void 0:b.LEAID}`},title:(E=l==null?void 0:l.attributes)==null?void 0:E.SCH_NAME,children:[v&&c(f,{children:["Couldn't"," find a district with ID ",i]}),u&&c(f,{children:["Couldn't"," find a school with ID ",t]}),(l==null?void 0:l.attributes)&&(d==null?void 0:d.attributes)&&c(A,{spacing:6,children:[c(K,{spacing:6,children:[e(m,{value:`${l.attributes.GSLO}-${l.attributes.GSHI}`,label:"Grades"}),e(m,{value:Math.floor(l.attributes.FTE),label:"Teachers"}),e(m,{value:Math.floor(l.attributes.TOTAL),label:"Students"}),e(m,{value:(y=l.attributes.STUTERATIO)==null?void 0:y.toFixed(2),label:"Students per Teacher"})]}),c(A,{spacing:6,alignItems:"stretch",children:[e(m,{label:"Phone",value:l.attributes.PHONE}),e(m,{label:"Address",value:h()})]}),a&&e(he,{data:a,style:{maxHeight:"300px"}}),e(V,{district:d,schools:[l]})]})]});function h(){if(!(l==null?void 0:l.attributes))return"";const{LSTREET1:C,LSTREET2:S,LCITY:I,LSTATE:Y,LZIP:Z}=l.attributes;let P=C;return S&&(P+=` ${S}`),P+=` ${I} ${Y} ${Z}`,P}}function Fe(){return c("div",{className:"App",children:[e(Le,{}),e(Ne,{}),e(O,{width:"4xl",maxWidth:"100%",zIndex:1,marginTop:F,minHeight:`calc(100vh - ${F})`,paddingTop:20,paddingBottom:20,children:e(be,{children:c(ge,{children:[e(_,{path:"/",element:e(ye,{})}),e(_,{path:"/districts/:districtId",element:e(we,{})}),e(_,{path:"/districts/:districtId/schools/:schoolId",element:e(_e,{})})]})})})]})}fe.render(e(pe.StrictMode,{children:e(me,{theme:x,children:e(Fe,{})})}),document.getElementById("root"));
